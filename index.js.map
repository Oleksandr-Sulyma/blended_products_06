{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/helpers.js","../src/home.js"],"sourcesContent":["export const limit = 12; // кількість продуктів на сторінку\nexport let currentPage = 1; // поточна сторінка  \n","import axios, { Axios } from 'axios';\nimport { limit, currentPage } from './constants.js';\n// API ендпоінт №1: базовий URL\nconst requestDummy = axios.create({\n  baseURL: 'https://dummyjson.com/products',\n});\n\n// API ендпоінт №2: функция getAllProducts(). Не приймає параметри, повертає проміс з даними (всі продукти з пагінацією)\nexport const getAllProducts = async (currentPage = 1) => {\n  try {\n    const response = await requestDummy.get(\n      `?limit=${limit}&skip=${\n        (currentPage - 1) * limit\n      }&select=id,thumbnail,title,brand,category,price`\n    );\n    return {data: response.data.products, total: response.data.total};\n  } catch (error) {\n    throw error;\n  }\n};\n\n// API ендпоінт №3: функція getProductById(id). Приймає id продукту, повертає проміс з даними (один продукт по ID)\nexport const getProductById = async id => {\n  try {\n    const response = await requestDummy.get(\n      `/${id}?select=id,thumbnail,title,tags,description,warrantyInformation,returnPolicy,price`\n    );\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// API ендпоінт №4: функція searchProducts(query). Приймає рядок пошукового запиту, повертає проміс з даними (список товарів,\n// що відповідають пошуковому запиту)\nexport const searchProducts = async (query, currentPage = 1) => {\n  try {\n    const response = await requestDummy.get(\n      `/search?q=${query}&limit=${limit}&skip=${\n        (currentPage - 1) * limit\n      }&select=id,thumbnail,title,brand,category,price`\n    );\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// API ендпоінт №5: функція getCategoryList(). Не приймає параметри, повертає проміс з даними (список категорій прoдуктів)\nexport const getCategoryList = async () => {\n  try {\n    const response = await requestDummy.get('/category-list');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// API ендпоінт №6: функція getProductsByCategory(category). Приймає назву категорії, повертає проміс з даними (список\n// продуктів у вказаній категорії)\nexport const getProductsByCategory = async (category, currentPage = 1) => {\n  try {\n    const response = await requestDummy.get(\n      `/category/${category}?limit=${limit}&skip=${\n        (currentPage - 1) * limit\n      }&select=id,thumbnail,title,brand,category,price`\n    );\n\n    return { data: response.data.products, total: response.data.total};\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n\n//для перевірки роботи функцій:\n// getAllProducts().then(data => console.log('getAllProducts- ', data));\n// getProductsByCategory('smartphones').then(data =>\n//   console.log('getProductsByCategory(\"smartphones\")- ', data)\n// );\n// getProductById(10).then(data => console.log('getProductById(5)- ', data));\n// searchProducts('phone').then(data =>\n//   console.log('searchProducts(\"phone\")- ', data)\n// );\n// getCategoryList().then(data => console.log('getCategoryList- ', data));\n","export default {\n  elCategories: document.querySelector('.categories'),\n  elProducts: document.querySelector('.products'),\n  cardProduct: document.querySelector('.modal-product'),\n  modal: document.querySelector('.modal'),\n  loadMoreButton: document.querySelector('.load-more-btn'),\n  notFoundBlock: document.querySelector('div.not-found'),\n};\n","import refs from './refs.js';\n\n// функція рендерить список категорій у контейнер\nexport function renderCategories(categories) {\n  categories.unshift('All');\n  const markup = categories\n    .map(\n      category => `\n     <li class=\"categories__item\">\n      <button class=\"categories__btn ${\n        category === 'All' ? 'categories__btn--active' : ''\n      }\" type=\"button\">${category}</button>\n    </li>`\n    )\n    .join('');\n  refs.elCategories.insertAdjacentHTML('beforeend', markup);\n}\n\n// функція створює HTML-розмітку для продуктів\nfunction murkupProdect(products) {\n  return products\n    .map(\n      ({ id, thumbnail, title, brand, category, price }) => `\n    <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${brand}</span></p>\n    <p class=\"products__category\">Category:${category} </p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\n    )\n    .join('');\n}\n// функція рендерить продукти у список на сторінці\nexport function renderProduct(products) {\n  refs.elProducts.insertAdjacentHTML('beforeend', murkupProdect(products));\n}\n\n// функція створює HTML-розмітку для картки продукту\nfunction markupCardProduct(product) {\n  const tags = product.tags\n    .map(\n      el =>\n        `<li>${el}</li>`\n    )\n    .join('');\n  return `\n    <img class=\"modal-product__img\" src=\"${product.thumbnail}\" alt=\"${product.title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${product.title}</p>\n        <ul class=\"modal-product__tags\">${tags}</ul>\n        <p class=\"modal-product__description\">${product.description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${product.warrantyInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${product.returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${product.price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n    `;\n}\n\nexport function renderCardProduct(product) {\n  refs.cardProduct.innerHTML = markupCardProduct(product);\n}\n\nexport function closeCardProduct() {\nrefs.cardProduct.innerHTML = '';\nrefs.modal.classList.remove('modal--is-open')  \n}","import refs from './refs';\nimport { limit } from './constants';\n\nfunction showLoadMoreButton(total, currentPage) {\n  const lastPage = Math.ceil(total / limit);\n\n  if (currentPage < lastPage) {\n    refs.loadMoreButton.classList.remove('is-hidden');\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\nfunction hideLoadMoreButton() {\n  refs.loadMoreButton.classList.add('is-hidden');\n}\n\nfunction scrollItem(item) {\n  if (item) {\n    const itemHeight = item.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nexport { showLoadMoreButton, hideLoadMoreButton, scrollItem };\n","//Логіка сторінки Home\nimport {\n  getAllProducts,\n  getProductsByCategory,\n  getProductById,\n  searchProducts,\n  getCategoryList,\n} from './js/products-api.js';\nimport refs from './js/refs.js';\n\nimport {\n  closeCardProduct,\n  renderCardProduct,\n  renderCategories,\n  renderProduct,\n} from './js/render-function.js';\n\nimport {\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  scrollItem,\n} from './js/helpers.js';\nimport { currentPage } from './js/constants.js';\n\nlet locCurrentPage = currentPage;\n\nasync function init() {\n  try {\n    const response = await getCategoryList();\n    renderCategories(response);\n    const { data, total } = await getAllProducts();\n    renderProduct(data);\n    showLoadMoreButton(total, locCurrentPage);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\ninit();\n\nrefs.elCategories.addEventListener('click', triggerCategory);\n\nasync function triggerCategory(e) {\n  e.preventDefault();\n  if (!e.target.classList.contains('categories__btn')) return;\n  locCurrentPage = 1;\n\n  e.currentTarget\n    .querySelector('.categories__btn--active')\n    .classList.remove('categories__btn--active');\n\n  const button = e.target.closest('.categories__btn');\n  const buttonValue = button.textContent.trim().toLowerCase();\n  button.classList.add('categories__btn--active');\n  refs.elProducts.innerHTML = '';\n\n  if (refs.notFoundBlock.classList.contains('not-found--visible')) {\n    refs.notFoundBlock.classList.remove('not-found--visible');\n  }\n\n  try {\n    if (buttonValue !== 'all') {\n      const { data, total } = await getProductsByCategory(buttonValue);\n      if (!data.length) {\n        hideLoadMoreButton();\n        refs.notFoundBlock.classList.add('not-found--visible');\n      } else {\n        renderProduct(data);\n        showLoadMoreButton(total, locCurrentPage);\n      }\n    } else {\n      const { data, total } = await getAllProducts();\n      if (!data.length) {\n        hideLoadMoreButton();\n        refs.notFoundBlock.classList.add('not-found--visible');\n      } else {\n        renderProduct(data);\n        showLoadMoreButton(total, locCurrentPage);\n      }\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nrefs.elProducts.addEventListener('click', handleOpenCardProduct);\n\nasync function handleOpenCardProduct(e) {\n  e.preventDefault();\n  const element = e.target.closest('.products__item');\n  if (!element) {\n    return;\n  }\n\n  refs.modal.classList.add('modal--is-open');\n  const productId = element.dataset.id;\n\n  try {\n    const responseProductsCard = await getProductById(productId);\n    renderCardProduct(responseProductsCard);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nrefs.modal.addEventListener('click', handleCardProduct);\n\nfunction handleCardProduct(e) {\n  e.preventDefault();\n  if (e.target.classList.contains('modal__close-btn')) {\n    return closeCardProduct();\n  }\n  // додати функціонал по іншим кнопкам картки\n}\n\nrefs.loadMoreButton.addEventListener('click', triggerLoadMore);\n\nasync function triggerLoadMore(e) {\n  e.preventDefault();\n\n  locCurrentPage += 1;\n  refs.loadMoreButton.disabled = true;\n\n  const activeCategory = refs.elCategories\n    .querySelector('.categories__btn.categories__btn--active')\n    .textContent.trim()\n    .toLowerCase();\n\n  try {\n    if (activeCategory !== 'all') {\n      const { data, total } = await getProductsByCategory(\n        activeCategory,\n        locCurrentPage\n      );\n      renderProduct(data);\n      showLoadMoreButton(total, locCurrentPage);\n    } else {\n      const { data, total } = await getAllProducts(locCurrentPage);\n      renderProduct(data);\n      showLoadMoreButton(total, locCurrentPage);\n    }\n    const galleryItem = refs.elProducts.querySelector('.products__item');\n    scrollItem(galleryItem);\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    refs.loadMoreButton.disabled = false;\n  }\n}\n"],"names":["limit","currentPage","requestDummy","axios","getAllProducts","response","error","getProductById","id","getCategoryList","getProductsByCategory","category","refs","renderCategories","categories","markup","murkupProdect","products","thumbnail","title","brand","price","renderProduct","markupCardProduct","product","tags","el","renderCardProduct","closeCardProduct","showLoadMoreButton","total","lastPage","hideLoadMoreButton","scrollItem","item","itemHeight","locCurrentPage","init","data","triggerCategory","e","button","buttonValue","handleOpenCardProduct","element","productId","responseProductsCard","handleCardProduct","triggerLoadMore","activeCategory","galleryItem"],"mappings":"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"}