import"./assets/styles-JE8YjOlG.js";import{a as v}from"./assets/vendor-N5iQpiFS.js";const n=12,d=v.create({baseURL:"https://dummyjson.com/products"}),g=async(t=1)=>{try{const e=await d.get(`?limit=${n}&skip=${(t-1)*n}&select=id,thumbnail,title,brand,category,price`);return{data:e.data.products,total:e.data.total}}catch(e){throw e}},L=async t=>{try{return(await d.get(`/${t}?select=id,thumbnail,title,tags,description,warrantyInformation,returnPolicy,price`)).data}catch(e){throw e}},$=async(t,e=1)=>{try{const o=await d.get(`/search?q=${t}&limit=${n}&skip=${(e-1)*n}&select=id,thumbnail,title,brand,category,price`);return{data:o.data.products,total:o.data.total}}catch(o){throw o}},w=async()=>{try{return(await d.get("/category-list")).data}catch(t){throw t}},P=async(t,e=1)=>{try{const o=await d.get(`/category/${t}?limit=${n}&skip=${(e-1)*n}&select=id,thumbnail,title,brand,category,price`);return{data:o.data.products,total:o.data.total}}catch(o){throw o}},r={elCategories:document.querySelector(".categories"),elProducts:document.querySelector(".products"),cardProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),searchProducts:document.querySelector(".search-form"),notFound:document.querySelector(".not-found"),clearBtn:document.querySelector(".search-form__btn-clear"),loadMoreButton:document.querySelector(".load-more-btn")};function C(t){t.unshift("All");const e=t.map(o=>`
     <li class="categories__item">
      <button class="categories__btn ${o==="All"?"categories__btn--active":""}" type="button">${o}</button>
    </li>`).join("");r.elCategories.insertAdjacentHTML("beforeend",e)}function q(t){return t.map(({id:e,thumbnail:o,title:a,brand:c,category:h,price:b})=>`
    <li class="products__item" data-id="${e}">
    <img class="products__image" src="${o}" alt="${a}"/>
    <p class="products__title">${a}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${c}</span></p>
    <p class="products__category">Category:${h} </p>
    <p class="products__price">Price: ${b}$</p>
 </li>`).join("")}function u(t){r.elProducts.insertAdjacentHTML("beforeend",q(t))}function B(t){const e=t.tags.map(o=>`<li>${o}</li>`).join("");return`
    <img class="modal-product__img" src="${t.thumbnail}" alt="${t.title}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${e}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping:${t.warrantyInformation}</p>
        <p class="modal-product__return-policy">Return Policy:${t.returnPolicy}</p>
        <p class="modal-product__price">Price: ${t.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
    `}function M(t){r.cardProduct.innerHTML=B(t)}function S(){r.cardProduct.innerHTML="",r.modal.classList.remove("modal--is-open")}function p(t,e){e<i(t)?r.loadMoreButton.classList.remove("is-hidden"):k()}function k(){r.loadMoreButton.classList.add("is-hidden")}function y(t){if(t){const e=t.getBoundingClientRect().height;window.scrollBy({top:e*2,behavior:"smooth"})}}const i=t=>Math.ceil(t/n);async function _(t,e){let o,a=0;try{if(t!=="all"?{data:o,total:a}=await P(t,e):{data:o,total:a}=await g(e),u(o),i(a)===e&&console.log("These are all the products found for your query."),p(a,e),e>1){const c=r.elProducts.querySelector(".products__item");y(c)}}catch(c){console.log(c.message)}finally{e<i(a)&&(r.loadMoreButton.disabled=!1)}}async function f(t,e){let o,a=0;try{if({data:o,total:a}=await $(t,e),i(a)===0)return r.notFound.classList.add("not-found--visible");u(o),i(a)===e&&console.log("These are all the products found for your query."),p(a,e),e>1&&y(item)}catch(c){console.log(c.message)}finally{e<i(a)&&(r.loadMoreButton.disabled=!1)}}let s=1,l;const m=r.searchProducts.elements.searchValue;async function T(){console.log(s);try{let t,e=0;const o=await w();C(o),{data:t,total:e}=await g(),u(t),p(e,s),console.log(s)}catch(t){console.log(t.message)}}T();r.elCategories.addEventListener("click",H);async function H(t){var a;if(s=1,m.value="",t.preventDefault(),!t.target.classList.contains("categories__btn"))return;(a=t.currentTarget.querySelector(".categories__btn--active"))==null||a.classList.remove("categories__btn--active");const e=t.target.closest(".categories__btn");e.classList.add("categories__btn--active");const o=e.textContent.trim().toLowerCase();r.elProducts.innerHTML="",_(o,s)}r.modal.addEventListener("click",j);function j(t){if(t.preventDefault(),t.target.classList.contains("modal__close-btn"))return S()}r.searchProducts.addEventListener("submit",D);async function D(t){t.preventDefault(),s=1,l=t.target.elements.searchValue.value.trim().toLowerCase();const e=r.elCategories.querySelector(".categories__btn--active");if(e&&(e.classList.remove("categories__btn--active"),r.elProducts.innerHTML=""),r.notFound.classList.contains("not-found--visible")&&r.notFound.classList.remove("not-found--visible"),!l)return console.log("Sorry, search query is empty!");f(l,s)}r.clearBtn.addEventListener("click",E);async function E(){m.value="",m.focus(),r.elProducts.innerHTML="",r.elCategories.querySelector(".categories__btn").classList.add("categories__btn--active");let e,o=0;try{({data:e,total:o}=await g()),u(e),p(o,s)}catch(a){console.log(a.message)}}r.loadMoreButton.addEventListener("click",I);console.log(s);async function I(t){t.preventDefault(),r.loadMoreButton.disabled=!0;let e=r.elCategories.querySelector(".categories__btn.categories__btn--active");e&&(e=e.textContent.trim().toLowerCase()),s+=1,e?_(e,s):l&&f(l,s)}r.elProducts.addEventListener("click",A);async function A(t){t.preventDefault();const e=t.target.closest(".products__item");if(!e)return;r.modal.classList.add("modal--is-open");const o=e.dataset.id;try{const a=await L(o);M(a)}catch(a){console.log(a.message)}}
//# sourceMappingURL=index.js.map
