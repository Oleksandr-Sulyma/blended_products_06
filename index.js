import"./assets/styles-JE8YjOlG.js";import{a as E}from"./assets/vendor-N5iQpiFS.js";const u=12,T="https://dummyjson.com/products",i="wishlist",p="cart",f=E.create({baseURL:T}),C=async(t=1)=>{try{const e=await f.get(`?limit=${u}&skip=${(t-1)*u}&select=id,thumbnail,title,brand,category,price`);return{data:e.data.products,total:e.data.total}}catch(e){throw e}},A=async t=>{try{return(await f.get(`/${t}?select=id,thumbnail,title,tags,description,warrantyInformation,returnPolicy,price`)).data}catch(e){throw e}},H=async(t,e=1)=>{try{const o=await f.get(`/search?q=${t}&limit=${u}&skip=${(e-1)*u}&select=id,thumbnail,title,brand,category,price`);return{data:o.data.products,total:o.data.total}}catch(o){throw o}},I=async()=>{try{return(await f.get("/category-list")).data}catch(t){throw t}},R=async(t,e=1)=>{try{const o=await f.get(`/category/${t}?limit=${u}&skip=${(e-1)*u}&select=id,thumbnail,title,brand,category,price`);return{data:o.data.products,total:o.data.total}}catch(o){throw o}},r={elCategories:document.querySelector(".categories"),elProducts:document.querySelector(".products"),cardProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),searchProducts:document.querySelector(".search-form"),notFound:document.querySelector(".not-found"),clearBtn:document.querySelector(".search-form__btn-clear"),loadMoreButton:document.querySelector(".load-more-btn")};function j(t){t.unshift("All");const e=t.map(o=>`
     <li class="categories__item">
      <button class="categories__btn ${o==="All"?"categories__btn--active":""}" type="button">${o}</button>
    </li>`).join("");r.elCategories.insertAdjacentHTML("beforeend",e)}function D(t){return t.map(({id:e,thumbnail:o,title:a,brand:n,category:k,price:x})=>`
    <li class="products__item" data-id="${e}">
    <img class="products__image" src="${o}" alt="${a}"/>
    <p class="products__title">${a}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${n}</span></p>
    <p class="products__category">Category:${k} </p>
    <p class="products__price">Price: ${x}$</p>
 </li>`).join("")}function h(t){r.elProducts.insertAdjacentHTML("beforeend",D(t))}function W(t){const e=t.tags.map(o=>`<li>${o}</li>`).join("");return`
    <img class="modal-product__img" src="${t.thumbnail}" alt="${t.id}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${e}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping:${t.warrantyInformation}</p>
        <p class="modal-product__return-policy">Return Policy:${t.returnPolicy}</p>
        <p class="modal-product__price">Price: ${t.price}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
    `}function F(t){r.cardProduct.innerHTML=W(t)}function b(t,e){e<m(t)?r.loadMoreButton.classList.remove("is-hidden"):O()}function O(){r.loadMoreButton.classList.add("is-hidden")}function S(t){if(t){const e=t.getBoundingClientRect().height;window.scrollBy({top:e*2,behavior:"smooth"})}}const m=t=>Math.ceil(t/u);async function P(t,e){let o,a=0;try{if(t!=="all"?{data:o,total:a}=await R(t,e):{data:o,total:a}=await C(e),h(o),m(a)===e&&console.log("These are all the products found for your query."),b(a,e),e>1){const n=r.elProducts.querySelector(".products__item");S(n)}}catch(n){console.log(n.message)}finally{e<m(a)&&(r.loadMoreButton.disabled=!1)}}async function q(t,e){let o,a=0;try{if({data:o,total:a}=await H(t,e),m(a)===0)return r.notFound.classList.add("not-found--visible");h(o),m(a)===e&&console.log("These are all the products found for your query."),b(a,e),e>1&&S(item)}catch(n){console.log(n.message)}finally{e<m(a)&&(r.loadMoreButton.disabled=!1)}}const y=(t,e)=>localStorage.setItem(t,JSON.stringify(e)),_=t=>JSON.parse(localStorage.getItem(t));let l=_(i)||[],d=_(p)||[],c;async function J(t){t.preventDefault(),r.modal.addEventListener("click",B),window.addEventListener("keydown",M);const e=t.target.closest(".products__item");if(!e)return;r.modal.classList.add("modal--is-open"),c=e.dataset.id;const o=r.modal.querySelector(".modal-product__btn--wishlist");l.includes(c)?o.textContent="Remove from Wishlist":o.textContent="Add to Wishlist";const a=r.modal.querySelector(".modal-product__btn--cart");d.includes(c)?a.textContent="Remove from Cart":a.textContent="Add to Cart";try{const n=await A(c);F(n);return}catch(n){console.log(n.message);return}}function B(t){if(t.preventDefault(),t.target.classList.contains("modal__close-btn")||t.target===t.currentTarget)return v();if(t.target.classList.contains("modal-product__btn--wishlist"))if(t.target.textContent.trim().toLowerCase()==="add to wishlist"){t.target.textContent="Remove from Wishlist",w(i);return}else{$(i),t.target.textContent="Add to Wishlist";return}if(t.target.classList.contains("modal-product__btn--cart"))if(t.target.textContent.trim().toLowerCase()==="add to cart"){t.target.textContent="Remove from Cart",w(p);return}else{$(p),t.target.textContent="Add to Cart";return}}function M(t){if(t.key==="Escape")return v()}function v(){r.cardProduct.innerHTML="",r.modal.classList.remove("modal--is-open"),window.removeEventListener("keydown",M),r.modal.removeEventListener("click",B)}function w(t){t===i?(l.push(c),y(i,l)):(d.push(c),y(p,d))}function $(t){t===i?(l=_(i),l=l.filter(e=>e!==c),y(i,l)):(d=_(p),d=d.filter(e=>e!==c),y(p,d))}let s=1,g;const L=r.searchProducts.elements.searchValue;async function K(){console.log(s);try{let t,e=0;const o=await I();j(o),{data:t,total:e}=await C(),h(t),b(e,s),console.log(s)}catch(t){console.log(t.message)}}K();r.elCategories.addEventListener("click",N);async function N(t){var a;if(s=1,L.value="",t.preventDefault(),!t.target.classList.contains("categories__btn"))return;(a=t.currentTarget.querySelector(".categories__btn--active"))==null||a.classList.remove("categories__btn--active");const e=t.target.closest(".categories__btn");e.classList.add("categories__btn--active");const o=e.textContent.trim().toLowerCase();r.elProducts.innerHTML="",P(o,s)}r.searchProducts.addEventListener("submit",U);async function U(t){t.preventDefault(),s=1,g=t.target.elements.searchValue.value.trim().toLowerCase();const e=r.elCategories.querySelector(".categories__btn--active");if(e&&(e.classList.remove("categories__btn--active"),r.elProducts.innerHTML=""),r.notFound.classList.contains("not-found--visible")&&r.notFound.classList.remove("not-found--visible"),!g)return console.log("Sorry, search query is empty!");q(g,s)}r.clearBtn.addEventListener("click",V);async function V(){L.value="",L.focus(),r.elProducts.innerHTML="",r.elCategories.querySelector(".categories__btn").classList.add("categories__btn--active");let e,o=0;try{({data:e,total:o}=await C()),h(e),b(o,s)}catch(a){console.log(a.message)}}r.loadMoreButton.addEventListener("click",z);console.log(s);async function z(t){t.preventDefault(),r.loadMoreButton.disabled=!0;let e=r.elCategories.querySelector(".categories__btn.categories__btn--active");e&&(e=e.textContent.trim().toLowerCase()),s+=1,e?P(e,s):g&&q(g,s)}r.elProducts.addEventListener("click",J);
//# sourceMappingURL=index.js.map
